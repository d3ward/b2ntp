const cloudsI = '<svg version="1.1" x="0px" y="0px" viewBox="0 0 60.7 40" style="enable-background:new 0 0 60.7 40;" xml:space="preserve"> <g fill="#fff"> <path d="M47.2,40H7.9C3.5,40,0,36.5,0,32.1l0,0c0-4.3,3.5-7.9,7.9-7.9h39.4c4.3,0,7.9,3.5,7.9,7.9v0 C55.1,36.5,51.6,40,47.2,40z"/> <circle cx="17.4" cy="22.8" r="9.3"/> <circle cx="34.5" cy="21.1" r="15.6"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;5;0" calcMode="linear"> </animateTransform> </g> <g fill="#ccc"> <path d="M54.7,22.3H33.4c-3.3,0-6-2.7-6-6v0c0-3.3,2.7-6,6-6h21.3c3.3,0,6,2.7,6,6v0 C60.7,19.6,58,22.3,54.7,22.3z"/> <circle cx="45.7" cy="10.7" r="10.7"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;-3;0" calcMode="linear"> </animateTransform> </g> </svg>';
const rainyI = '<svg version="1.1" x="0px" y="0px" viewBox="0 0 55.1 60" style="enable-background:new 0 0 55.1 49.5;" xml:space="preserve"> <g fill="#fff"> <path d="M20.7,46.4c0,1.7-1.4,3.1-3.1,3.1s-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S20.7,44.7,20.7,46.4z"></path> <path d="M31.4,46.4c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S31.4,44.7,31.4,46.4z"> </path> <path d="M41.3,46.4c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S41.3,44.7,41.3,46.4z"> </path> <animateTransform attributeName="transform" attributeType="XML" dur="1s" keyTimes="0;1" repeatCount="indefinite" type="translate" values="0 0;0 10" calcMode="linear"> </animateTransform> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="1s" keyTimes="0;1" repeatCount="indefinite" values="1;0" calcMode="linear"/> </g> <g fill="#fff"> <path d="M47.2,34.5H7.9c-4.3,0-7.9-3.5-7.9-7.9l0,0c0-4.3,3.5-7.9,7.9-7.9h39.4c4.3,0,7.9,3.5,7.9,7.9 v0C55.1,30.9,51.6,34.5,47.2,34.5z"/> <circle cx="17.4" cy="17.3" r="9.3"/> <circle cx="34.5" cy="15.6" r="15.6"/> </g> </svg>';
const crlI = '<svg version="1.1" x="0px" y="0px" viewBox="0 0 60.7 80" style="enable-background:new 0 0 60.7 55;" xml:space="preserve"> <g fill="#999"> <path d="M47.2,40H7.9C3.5,40,0,36.5,0,32.1l0,0c0-4.3,3.5-7.9,7.9-7.9h39.4c4.3,0,7.9,3.5,7.9,7.9v0 C55.1,36.5,51.6,40,47.2,40z"/> <circle cx="17.4" cy="22.8" r="9.3"/> <circle cx="34.5" cy="21.1" r="15.6"/> </g> <g fill="#ccc"> <path d="M54.7,22.3H33.4c-3.3,0-6-2.7-6-6v0c0-3.3,2.7-6,6-6h21.3c3.3,0,6,2.7,6,6v0 C60.7,19.6,58,22.3,54.7,22.3z"/> <circle cx="45.7" cy="10.7" r="10.7"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;-3;0" calcMode="linear"> </animateTransform> </g> <g fill="#ff0"> <path d="M43.6,22.7c-0.2,0.6-0.4,1.3-0.6,1.9c-0.2,0.6-0.4,1.2-0.7,1.8c-0.4,1.2-0.9,2.4-1.5,3.5 c-1,2.3-2.2,4.6-3.4,6.8l-1.7-2.9c3.2-0.1,6.3-0.1,9.5,0l3,0.1l-1.3,2.5c-1.1,2.1-2.2,4.2-3.5,6.2c-0.6,1-1.3,2-2,3 c-0.7,1-1.4,2-2.2,2.9c0.2-1.2,0.5-2.4,0.8-3.5c0.3-1.2,0.6-2.3,1-3.4c0.7-2.3,1.5-4.5,2.4-6.7l1.7,2.7c-3.2,0.1-6.3,0.2-9.5,0 l-3.4-0.1l1.8-2.8c1.4-2.1,2.8-4.2,4.3-6.2c0.8-1,1.6-2,2.4-3c0.4-0.5,0.8-1,1.3-1.5C42.7,23.7,43.1,23.2,43.6,22.7z"/> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="3s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;0;1" calcMode="linear"/> </g> <g fill="#fff"> <path d="M36.3,51.9c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S36.3,50.2,36.3,51.9z"/> <path d="M26.4,51.9c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S26.4,50.2,26.4,51.9z"/> <path d="M15.7,51.9c0,1.7-1.4,3.1-3.1,3.1s-3.1-1.4-3.1-3.1c0-1.7,3.1-7.8,3.1-7.8 S15.7,50.2,15.7,51.9z"/> <animateTransform attributeName="transform" attributeType="XML" dur="1s" keyTimes="0;1" repeatCount="indefinite" type="translate" values="0 0;0 10" calcMode="linear"> </animateTransform> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="1s" keyTimes="0;1" repeatCount="indefinite" values="1;0" calcMode="linear"/> </g> </svg>';
const mist = '<svg version="1.1" x="0px" y="0px" viewBox="0 0 45.1 47.6" style="enable-background:new 0 0 45.1 47.6;" xml:space="preserve"> <g fill="none" stroke="#FFF" stroke-width="2" stroke-miterlimit="10"> <line x1="25.5" y1="17.3" x2="5.3" y2="17.3"/> <line x1="27" y1="20.3" x2="0" y2="20.3"/> <line x1="35" y1="24.3" x2="20" y2="24.3"/> <line x1="40" y1="27.3" x2="15" y2="27.3"/> <line x1="25.5" y1="30.3" x2="5.3" y2="30.3"/> <line x1="27" y1="33.3" x2="0" y2="33.3"/> <line x1="15" y1="36.3" x2="50" y2="36.3"/> <line x1="20" y1="39.3" x2="45" y2="39.3"/> <line x1="10" y1="42.3" x2="35" y2="42.3"/> <line x1="5" y1="45.3" x2="30" y2="45.3"/> <animateTransform attributeName="transform" attributeType="XML" dur="4s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="5;0;5" calcMode="linear"> </animateTransform> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="4s" keyTimes="0;1" repeatCount="indefinite" values="0.3;3;" calcMode="linear"/> </g> </svg>';
const snowy = '<svg version="1.1" x="0px" y="0px" viewBox="0 0 55.1 52.5" style="enable-background:new 0 0 55.1 52.5;" xml:space="preserve"> <g fill="#fff"> <g> <path d="M47.2,34.5H7.9c-4.3,0-7.9-3.5-7.9-7.9l0,0c0-4.3,3.5-7.9,7.9-7.9h39.4c4.3,0,7.9,3.5,7.9,7.9 v0C55.1,30.9,51.6,34.5,47.2,34.5z"/> <circle cx="17.4" cy="17.3" r="9.3"/> <circle cx="34.5" cy="15.6" r="15.6"/> </g> <circle cx="37" cy="43.5" r="3"> <animateTransform attributeName="transform" attributeType="XML" dur="1.5s" keyTimes="0;0.33;0.66;1" repeatCount="indefinite" type="translate" values="1 -2;3 2; 1 4; 2 6" calcMode="linear"> </animateTransform> </circle> <circle cx="27" cy="43.5" r="3"> <animateTransform attributeName="transform" attributeType="XML" dur="1.5s" keyTimes="0;0.33;0.66;1" repeatCount="indefinite" type="translate" values="1 -2;3 2; 1 4; 2 6" calcMode="linear"> </animateTransform> </circle> <circle cx="17" cy="43.5" r="3"> <animateTransform attributeName="transform" attributeType="XML" dur="1.5s" keyTimes="0;0.33;0.66;1" repeatCount="indefinite" type="translate" values="1 -2;3 2; 1 4; 2 6" calcMode="linear"> </animateTransform> </circle> </g> </svg>';
const icons = {
  '50d': mist,
  '50n': mist,
  '13d': snowy,
  '13n': snowy,
  '11d': crlI,
  '11n': crlI,
  '10d': rainyI,
  '10n': rainyI,
  '09d': rainyI,
  '09n': rainyI,
  '04d': cloudsI,
  '04n': cloudsI,
  '03d': cloudsI,
  '03n': cloudsI,
  '02d': '<svg version="1.1" x="0px" y="0px" viewBox="0 0 61.7 42.8" style="enable-background:new 0 0 61.7 42.8;" xml:space="preserve"> <g fill="#fff"> <path d="M47.2,42.8H7.9c-4.3,0-7.9-3.5-7.9-7.9l0,0C0,30.5,3.5,27,7.9,27h39.4c4.3,0,7.9,3.5,7.9,7.9 v0C55.1,39.2,51.6,42.8,47.2,42.8z"/> <circle cx="17.4" cy="25.5" r="9.3"/> <circle cx="34.5" cy="23.9" r="15.6"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;5;0" calcMode="linear"> </animateTransform> </g> <g fill="#ff0"> <circle cx="31.4" cy="18.5" r="9"/> <g> <path d="M31.4,6.6L31.4,6.6c-0.4,0-0.6-0.3-0.6-0.6V0.6C30.8,0.3,31,0,31.3,0l0.1,0 C31.7,0,32,0.3,32,0.6v5.5C32,6.4,31.7,6.6,31.4,6.6z"/> <path d="M31.4,30.1L31.4,30.1c-0.4,0-0.6,0.3-0.6,0.6v5.5c0,0.3,0.3,0.6,0.6,0.6h0.1 c0.3,0,0.6-0.3,0.6-0.6v-5.5C32,30.4,31.7,30.1,31.4,30.1z"/> <path d="M19.6,18.3L19.6,18.3c0,0.4-0.3,0.6-0.6,0.6h-5.5c-0.3,0-0.6-0.3-0.6-0.6v-0.1 c0-0.3,0.3-0.6,0.6-0.6H19C19.3,17.8,19.6,18,19.6,18.3z"/> <path d="M43.1,18.3L43.1,18.3c0,0.4,0.3,0.6,0.6,0.6h5.5c0.3,0,0.6-0.3,0.6-0.6v-0.1 c0-0.3-0.3-0.6-0.6-0.6h-5.5C43.4,17.8,43.1,18,43.1,18.3z"/> <path d="M22.4,26L22.4,26c0.3,0.3,0.2,0.7,0,0.9l-4.2,3.6c-0.2,0.2-0.6,0.2-0.8-0.1l-0.1-0.1 c-0.2-0.2-0.2-0.6,0.1-0.8l4.2-3.6C21.9,25.8,22.2,25.8,22.4,26z"/> <path d="M40.3,10.7L40.3,10.7c0.3,0.3,0.6,0.3,0.8,0.1l4.2-3.6c0.2-0.2,0.3-0.6,0.1-0.8l-0.1-0.1 c-0.2-0.2-0.6-0.3-0.8-0.1l-4.2,3.6C40.1,10.1,40,10.5,40.3,10.7z"/> <path d="M22.4,10.8L22.4,10.8c0.3-0.3,0.2-0.7,0-0.9l-4.2-3.6c-0.2-0.2-0.6-0.2-0.8,0.1l-0.1,0.1 c-0.2,0.2-0.2,0.6,0.1,0.8l4.2,3.6C21.9,11,22.2,11,22.4,10.8z"/> <path d="M40.3,26.1L40.3,26.1c0.3-0.3,0.6-0.3,0.8-0.1l4.2,3.6c0.2,0.2,0.3,0.6,0.1,0.8l-0.1,0.1 c-0.2,0.2-0.6,0.3-0.8,0.1l-4.2-3.6C40.1,26.7,40,26.3,40.3,26.1z"/> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="0.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;0.6;1" calcMode="linear"/> </g> <animateTransform attributeName="transform" attributeType="XML" dur="2s" keyTimes="0;1" repeatCount="indefinite" type="scale" values="1;1" calcMode="linear"> </animateTransform> </g> <g fill="#ccc"> <path d="M55.7,25.1H34.4c-3.3,0-6-2.7-6-6v0c0-3.3,2.7-6,6-6h21.3c3.3,0,6,2.7,6,6v0 C61.7,22.4,59,25.1,55.7,25.1z"/> <circle cx="46.7" cy="13.4" r="10.7"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;-3;0" calcMode="linear"> </animateTransform> </g> </svg>',
  '02n': '<svg version="1.1" x="0px" y="0px" viewBox="0 0 60.7 44.4" style="enable-background:new 0 0 60.7 44.4;" xml:space="preserve"> <g fill="#fff"> <path d="M47.2,44.4H7.9c-4.3,0-7.9-3.5-7.9-7.9l0,0c0-4.3,3.5-7.9,7.9-7.9h39.4c4.3,0,7.9,3.5,7.9,7.9 v0C55.1,40.9,51.6,44.4,47.2,44.4z"/> <circle cx="17.4" cy="27.2" r="9.3"/> <circle cx="34.5" cy="25.5" r="15.6"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;5;0" calcMode="linear"> </animateTransform> </g> <path fill="#ff0" d="M33.6,17.9c-0.2-7.7,4.9-14.4,12-16.4c-2.3-1-4.9-1.5-7.6-1.5c-9.8,0.3-17.5,8.5-17.2,18.3 c0.3,9.8,8.5,17.5,18.3,17.2c2.7-0.1,5.2-0.8,7.5-1.9C39.3,32,33.8,25.6,33.6,17.9z"/> <g fill="#ccc"> <path d="M54.7,26.8H33.4c-3.3,0-6-2.7-6-6v0c0-3.3,2.7-6,6-6h21.3c3.3,0,6,2.7,6,6v0 C60.7,24.1,58,26.8,54.7,26.8z"/> <circle cx="45.7" cy="15.1" r="10.7"/> <animateTransform attributeName="transform" attributeType="XML" dur="6s" keyTimes="0;0.5;1" repeatCount="indefinite" type="translate" values="0;-3;0" calcMode="linear"> </animateTransform> </g> </svg>',
  '01d': '<svg version="1.1" x="0px" y="0px" viewBox="0 0 44.9 44.9" xml:space="preserve"> <g fill="#ff0"> <circle cx="22.4" cy="22.6" r="11"/> <g> <path d="M22.6,8.1h-0.3c-0.3,0-0.6-0.3-0.6-0.6v-7c0-0.3,0.3-0.6,0.6-0.6l0.3,0c0.3,0,0.6,0.3,0.6,0.6 v7C23.2,7.8,22.9,8.1,22.6,8.1z"/> <path d="M22.6,36.8h-0.3c-0.3,0-0.6,0.3-0.6,0.6v7c0,0.3,0.3,0.6,0.6,0.6h0.3c0.3,0,0.6-0.3,0.6-0.6v-7 C23.2,37,22.9,36.8,22.6,36.8z"/> <path d="M8.1,22.3v0.3c0,0.3-0.3,0.6-0.6,0.6h-7c-0.3,0-0.6-0.3-0.6-0.6l0-0.3c0-0.3,0.3-0.6,0.6-0.6h7 C7.8,21.7,8.1,21.9,8.1,22.3z"/> <path d="M36.8,22.3v0.3c0,0.3,0.3,0.6,0.6,0.6h7c0.3,0,0.6-0.3,0.6-0.6v-0.3c0-0.3-0.3-0.6-0.6-0.6h-7 C37,21.7,36.8,21.9,36.8,22.3z"/> <path d="M11.4,31.6l0.2,0.3c0.2,0.2,0.2,0.6-0.1,0.8l-5.3,4.5c-0.2,0.2-0.6,0.2-0.8-0.1l-0.2-0.3 c-0.2-0.2-0.2-0.6,0.1-0.8l5.3-4.5C10.9,31.4,11.2,31.4,11.4,31.6z"/> <path d="M33.2,13l0.2,0.3c0.2,0.2,0.6,0.3,0.8,0.1l5.3-4.5c0.2-0.2,0.3-0.6,0.1-0.8l-0.2-0.3 c-0.2-0.2-0.6-0.3-0.8-0.1l-5.3,4.5C33,12.4,33,12.7,33.2,13z"/> <path d="M11.4,13.2l0.2-0.3c0.2-0.2,0.2-0.6-0.1-0.8L6.3,7.6C6.1,7.4,5.7,7.5,5.5,7.7L5.3,7.9 C5.1,8.2,5.1,8.5,5.4,8.7l5.3,4.5C10.9,13.5,11.2,13.5,11.4,13.2z"/> <path d="M33.2,31.9l0.2-0.3c0.2-0.2,0.6-0.3,0.8-0.1l5.3,4.5c0.2,0.2,0.3,0.6,0.1,0.8l-0.2,0.3 c-0.2,0.2-0.6,0.3-0.8,0.1l-5.3-4.5C33,32.5,33,32.1,33.2,31.9z"/> <animate attributeType="CSS" attributeName="opacity" attributeType="XML" dur="0.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;0.6;1" calcMode="linear"/> </g> </g> </svg>',
  '01n': '<svg version="1.1" x="0px" y="0px" viewBox="0 0 30.8 42.5" xml:space="preserve" > <path fill="#ff0" d="M15.3,21.4C15,12.1,21.1,4.2,29.7,1.7c-2.8-1.2-5.8-1.8-9.1-1.7C8.9,0.4-0.3,10.1,0,21.9 c0.3,11.7,10.1,20.9,21.9,20.6c3.2-0.1,6.3-0.9,8.9-2.3C22.2,38.3,15.6,30.7,15.3,21.4z"/> </svg>'
};
// ---------- UTILITY ----------------
//Alert notification
function alert(options) {
  var t = this;
  t.count = 0;
  t.timeout = (options.timeout) ? options.timeout : 3000;
  t.autoClose = (options.hasOwnProperty('autoClose')) ? options.autoClose : true;
  const close = '<svg class="_icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>';
  t.container = document.querySelector("#nt1");
  t.close = function ($el) {
    $el.classList.add("animate-out");
    setTimeout(() => {
      $el.remove();
      t.count--;
    }, 300);
  }
  t.setCloseOnClick = function ($el) {
    $el.addEventListener("click", function () {
      t.close($el);
    });
  }
  t.setAutocloseTimeout = function ($el, timeout) {
    setTimeout(function () {
      t.close($el);
    }, timeout);
  }
  t.createItem = function (message, color) {
    var item = document.createElement("div");
    item.classList.add("notify-item");
    item.classList.add(color);
    var span = document.createElement("span");
    span.textContent = message;
    item.appendChild(span);
    t.count++;
    return item;
  }
  t.error = function (txt) {
    t.show(t.createItem(txt, "error"));
  }
  t.warn = function (txt) {
    t.show(t.createItem(txt, "warn"));
  }
  t.info = function (txt) {
    var l = t.createItem(txt, "info");
    t.show(l);
  }
  t.success = function (txt) {
    var l = t.createItem(txt, "success");
    t.show(l);
  }
  t.show = function (l) {
    console.log(t.autoClose);
    if (t.autoClose)
      t.setAutocloseTimeout(l, t.timeout);
    t.setCloseOnClick(l);
    t.container.append(l);
  }
}
//Animate on scroll
function aos() {
  if (IntersectionObserver) {
    let callback = function (entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting && !entry.target.classList.contains('_a_completed'))
          entry.target.classList.add('_a_completed');
        else
          entry.target.classList.remove('_a_completed');
      });
    }
    let observer = new IntersectionObserver(callback, {
      root: null,
      threshold: 0.2
    });
    let items = document.querySelectorAll("[class*=_aos]");
    items.forEach((item) => {
      observer.observe(item);
    });
  }
}
//Modal
function modal() {
  var t = this;
  let m = document.querySelector('.modal');
  if (m) {
    t.targets = document.querySelectorAll('[data-toggle="' + m.id + '"]');
    t.closebtns = m.querySelectorAll('.close-modal');
    t.bdy=document.querySelector('html').classList;
  }
  t.show = function () {
    t.bdy.add('_overflowhidden');
    m.classList.add('_show-modal');
  }
  t.hide = function () {
    m.classList.remove('_show-modal');
    setTimeout(() => {
      t.bdy.remove('_overflowhidden');
    }, 400);
  }
  t.listeners = function () {
    t.targets.forEach(el => {
      el.addEventListener('click', function (e) {
        t.show();
      });
    });
    t.closebtns.forEach(function (item) {
      item.addEventListener('click', function (e) {
        t.hide();
      });
    });
  }
  if (m)
    t.listeners();
}
//Theme for settings
function theme() {
  var toggles = document.getElementsByClassName("theme-toggle");
  if (window.CSS && CSS.supports("color", "var(--bg)") && toggles) {
    var storedTheme = localStorage.getItem('theme') || (window.matchMedia("(prefers-color-scheme: dark)").matches ?
      "dark" : "light");
    if (storedTheme)
      document.documentElement.setAttribute('data-theme', storedTheme)
    for (var i = 0; i < toggles.length; i++) {
      toggles[i].onclick = function () {
        var currentTheme = document.documentElement.getAttribute("data-theme");
        var targetTheme = "light";
        if (currentTheme === "light")
          targetTheme = "dark";
        document.documentElement.setAttribute('data-theme', targetTheme)
        localStorage.setItem('theme', targetTheme);
      };
    }

  }
}
//Go to top button
function gotop() {
  var el = this;
  el.gt = document.getElementById('gt-link');
  el.scrollToTop = function () {
    window.scroll({
      top: 0,
      left: 0,
      behavior: 'smooth'
    });
  }
  el.listeners = function () {
    window.addEventListener("scroll", () => {
      let y = window.scrollY;
      if (y > 0) {
        el.gt.classList.remove("hide");
      } else {
        el.gt.classList.add("hide");
      }
    });
    el.gt.onclick = function (e) {
      e.preventDefault();
      if (document.documentElement.scrollTop || document.body.scrollTop > 0) {
        el.scrollToTop();
      }
    }
  }
  if (el.gt) {
    el.listeners();
  }
}
//Manage pages 
function pagesRoute() {
  const link = Array.from(document.querySelectorAll('[topage]'));
  if (link) {
    const navigate = (id) => {
      var activePage = document.querySelector("section.page-active");
      var activeLink = document.querySelector("[topage].active");
      if (activePage)
        activePage.classList.remove("page-active");
      if (activeLink)
        activeLink.classList.remove("active");
      var nextPage = document.querySelector(id);
      var nextLink = document.querySelector("[topage='" + id + "']");
      if (nextPage)
        nextPage.classList.add("page-active");
      if (nextLink)
        nextLink.classList.add("active");
    }
    link.forEach(function (page) {
      var id = page.getAttribute("topage");
      page.addEventListener('click', function () {
        navigate(id)
      });
    })
  }
}
//Manage sidebar 
function sidebar() {
  var t = this;
  t.m = false;
  t.n = document.querySelector("aside").classList;
  t.listener = function () {
    t.b = document.querySelector(".open-aside");
    t.b.addEventListener('click', function () {
      if (t.m) {
        t.n.remove("opened");
        t.m = false;
      } else {
        t.n.add("opened");
        t.m = true;
      }
    });
  }
  t.close = function () {
    document.getElementById("mySidebar").style.width = "85px";
    document.getElementById("main").style.marginLeft = "85px";
    t.mini = true;
  }
  t.open = function () {
    document.getElementById("mySidebar").style.width = "250px";
    document.getElementById("main").style.marginLeft = "250px";
    t.mini = false;
  }
  t.listener();
}
//Function to generate gradient color
function random_gradient() {
  var colorOne = {
    R: Math.floor(Math.random() * 255),
    G: Math.floor(Math.random() * 255),
    B: Math.floor(Math.random() * 255)
  };
  var colorTwo = {
    R: Math.floor(Math.random() * 255),
    G: Math.floor(Math.random() * 255),
    B: Math.floor(Math.random() * 255)
  };
  colorOne.rgb = 'rgb(' + colorOne.R + ',' + colorOne.G + ',' + colorOne.B + ')';
  colorTwo.rgb = 'rgb(' + colorTwo.R + ',' + colorTwo.G + ',' + colorTwo.B + ')';
  return 'radial-gradient(at top left, ' + colorOne.rgb + ', ' + colorTwo.rgb + ')';
}
//Functions for localstorage store and get
function localStore(key, obj) {
  return window.localStorage.setItem(key, JSON.stringify(obj));
}
function localGet(key) {
  return JSON.parse(window.localStorage.getItem(key));
}
//Get elapsed minutes to date 
function diff_hours(dt) {
  var now = new Date();
  var diff = (new Date(dt) - now.getTime()) / 1000;
  diff /= 60;
  return Math.abs(Math.round(diff));
}
//Capitalize first letter of string
function capitalizeF(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
//Get json from url 
function getJSON(url) {
  var resp = '';
  var xmlHttp = new XMLHttpRequest();
  if (xmlHttp != null) {
    xmlHttp.open("GET", url, false, {
      async: true
    });
    try {
      xmlHttp.send(null);
    } catch {
      console.error("xmlHttp send failed");
    }
    resp = xmlHttp.responseText;
  }
  return resp;
}
//Function to select an option
function selectElement(id, valueToSelect) {
  let el = document.getElementById(id);
  el.value = valueToSelect;
}

/* ---------------- Toast Alert --------------- */
var ntoast = new alert({
  timeout: 2000
});


/* ------- Data Setup and Configuration ------- */
var bk_data = localGet('bk_data');
var bk_time = localGet('bk_time');
var sb_data = localGet('sb_data');
var wth_data = localGet("wth_data");
var bdy_data = localGet("bdy_data");
var bg_value = getComputedStyle(document.body).getPropertyValue("--bg-img");
var grid_wrap = getComputedStyle(document.body).getPropertyValue("--grid-wrap");
var grid_width = getComputedStyle(document.body).getPropertyValue("--grid-width");

if (bdy_data != undefined) {
  document.body.setAttribute("style", (bdy_data).replace('"', ''));
} else {
  document.body.style.setProperty("--bg-img", 'radial-gradient(at top left, rgb(150,245,220), rgb(56,97,139))');
}
document.getElementById("wllp_value").value = bg_value;
if (grid_wrap == " none" && grid_width == " 33.33%") {
  selectElement("grid_layout", "h");
} else if (grid_wrap == " wrap" && grid_width == " 33.33%") {
  selectElement("grid_layout", "v3");
} else {
  selectElement("grid_layout", "v2");
}
if (sb_data == undefined) {
  sb_data = {
    "placeholder": "Search with shortcuts..",
    "default": "d",
    "b": "https://bing.com/search?q=",
    "g": "https://google.com/search?q=",
    "d": "https://duckduckgo.com/?q=",
    "r": "https://www.reddit.com/search?q=",
    "y": "https://www.youtube.com/results?q="
  };
  localStore('sb_data', sb_data);
}
if (bk_data == undefined || bk_time == undefined) {
  bk_data = {};
  getBookmarks();
  console.log("bk_data undefined");
} else {
  if (diff_hours(bk_time) > 60) {
    bk_data = {};
    console.log("Passed 60 minutes, sync");
    ntoast.success('Passed 60 minutes, updated from bookmarks');
    getBookmarks();
  }
}
if (wth_data == undefined) {
  wth_data = {
    status: false,
    api: "",
    lon: "",
    lat: ""
  }
}

/* ---------- Weather Settings Config --------- */
const wt_checkbox = document.getElementById("wt_status");
var wth_status = wth_data.status;
wt_checkbox.checked = wth_status;
document.body.style.setProperty("--wt", (wth_status) ? "block" : "none");
document.getElementById("wt_ik").value = wth_data.api;
document.getElementById("wt_ila").value = wth_data.lat;
document.getElementById("wt_iln").value = wth_data.lon;
wt_checkbox.onclick = () => {
  var wth_status = wt_checkbox.checked;
  document.body.style.setProperty("--wt", (wth_status) ? "block" : "none");
}

function f_save_wth() {
  const status = document.getElementById("wt_status").checked;
  const api = document.getElementById("wt_ik").value;
  const lat = document.getElementById("wt_ila").value;
  const lon = document.getElementById("wt_iln").value;
  wth_data.status = status;
  if (api && lat && lon) {
    wth_data.api = api;
    wth_data.lon = lon;
    wth_data.lat = lat;
  }
  localStore("wth_data", wth_data);
  f_setup_wth();
}

function f_get_ll() {
  try {
    navigator.geolocation.getCurrentPosition(showPosition);
  } catch (e) {
    alert(e);
  }
}

function showPosition(position) {
  document.getElementById("wt_ila").value = position.coords.latitude;
  document.getElementById("wt_iln").value = position.coords.longitude;
}

function f_setup_wth() {
  var appid = wth_data.api;
  if (appid.length > 6 && appid != "" && wth_status) {
    if ((typeof localStorage.cachedWeatherUpdate == "undefined") || ((Date.now() / 1000) - localStorage.cachedWeatherUpdate) > 600) {
      document.getElementById('wth_s').style.display = "none";
      var url = 'https://api.openweathermap.org/data/2.5/find?lat=' + wth_data.lat + '&lon=' + wth_data.lon + '&cnt=1&appid=' + appid + '&callback=?';
      var data = getJSON(url);
      if (data == "") return;
      data = JSON.parse(data.substring(2, data.length - 1));
      document.getElementById("wth_l").style.opacity = 1;
      document.getElementById("wth_c").innerText = data.list[0].name;
      document.getElementById("wth_i").appendChild(icons[data.list[0].weather[0].icon]);
      document.getElementById("wth_d1").innerText = capitalizeF(data.list[0].weather[0].description);
      var temp = (data.list[0].main.temp - 273.15).toFixed(0);
      var temp_f = (data.list[0].main.feels_like - 273.15).toFixed(0);
      var temp_min = (data.list[0].main.temp_min - 273.15).toFixed(0);
      var temp_max = (data.list[0].main.temp_max - 273.15).toFixed(0);
      var tt = "&#8451;";
      var windDeg = data.list[0].wind.deg;
      //convert to F
      if (0) {
        temp = (1.8 * temp + 32).toFixed(0);
        temp_f = (1.8 * temp_f + 32).toFixed(0);
        temp_min = (1.8 * temp_min + 32).toFixed(0);
        temp_max = (1.8 * temp_max + 32).toFixed(0);
        tt = "&#8457;";
      }
      document.getElementById("wth_t").innerText = temp + tt;
      document.getElementById("wth_mm").innerText = temp_max + tt + " / " + temp_min + tt;
      document.getElementById('wth_w').innerHTML = ('<i class="far fa-wind _' + windDeg + '-deg" title="Wind direction (' + windDeg + ' degrees)"></i> ' + data.list[0].wind.speed + " mps");
      document.getElementById('wth_h').innerHTML = ('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M160 292c0-15.5-12.5-28-28-28s-28 12.5-28 28 12.5 28 28 28 28-12.5 28-28zm92 60c-15.5 0-28 12.5-28 28s12.5 28 28 28 28-12.5 28-28-12.5-28-28-28zM223.9 22.1C219.5 7.5 205.8 0 192 0c-13.5 0-27 7.2-31.8 22.1C109.1 179.8 0 222.7 0 333.9 0 432.3 85.9 512 192 512s192-79.7 192-178.1c0-111.7-108.9-153.3-160.1-311.8zM192 480c-88.2 0-160-65.5-160-146.1 0-47.6 25-80.4 59.6-125.9 32.6-42.8 73.1-96 98.6-175.7.1-.1.8-.3 1.8-.3.7 0 1.2.1 1.4.1h.1c26 80.4 66.5 133.4 99.1 176.1C327.1 253.4 352 286 352 333.9c0 80.6-71.8 146.1-160 146.1zm61-212.2l-12.5-10c-3.5-2.8-8.5-2.2-11.2 1.2l-99.5 134c-2.8 3.5-2.2 8.5 1.2 11.2l12.5 10c3.5 2.8 8.5 2.2 11.2-1.2l99.5-134c2.8-3.4 2.2-8.5-1.2-11.2z"/></svg>' +
        data.list[0].main.humidity + "%");
    }
    document.getElementById('wth_l').style.display = "none";
    document.getElementById('wth_top').style.opacity = 1;
    document.getElementById('wth_btm').style.opacity = 1;
  } else {
    document.getElementById('wth_l').style.display = "none";
    document.getElementById('wth_s').style.opacity = 1;
  }
}
f_setup_wth();


//Set up data
const sb_len = document.getElementById("sb_txt");
var sk = sb_data;
var sb_len_v = "";
for (var key in sk) {
  sb_len_v += key + ' -> ' + sk[key] + '\n';
}
sb_len.value = sb_len_v;

function f_trim(s) {
  s = s.replace(/(^\s*)|(\s*$)/gi, "");
  s = s.replace(/[ ]{2,}/gi, " ");
  s = s.replace(/\n /, "\n");
  return s;
}
//Function save body style
function f_save_bdy() {
  localStore("bdy_data", document.body.getAttribute("style"));
  console.log("Settings saved !");
  ntoast.success('Settings saved !');
}

/* ---- Function to save search bar config ---- */
function f_save_sb() {
  var tlen = f_trim(document.getElementById("sb_txt").value) + "\n";
  var error = false;
  var lines = tlen.split('\n');
  lines.splice(-1, 1);
  lines = lines.filter(function (e) {
    return e.replace(/(\r\n|\n|\r)/gm, "")
  });
  var sKc = {};
  for (var i = 0; i < lines.length; i++) {
    var zlen = lines[i].split("->");
    if (zlen.length != 2) {
      i = lines.length;
      error = true;
    } else {
      sKc[f_trim(zlen[0])] = f_trim(zlen[1]);
    }
  }
  error = error || !(sKc['default']);
  if (error) {
    alert("Looks like you removed important keywords like \n-placeholder\n-key\n-default\n Make sure to follow the syntax too :'k' -> 'value'");
  } else {
    sb_data = sKc;
    localStore('sb_data', sb_data);
  }
}
document.getElementById("mdl_save").onclick = () => {
  f_save_sb();
  f_save_wth();
  f_save_bdy();
};

// ---------- BUILD PAGE ----------
var pivotmatch = 0;
var totallinks = 0;
var prevregexp = "";
//Concatenate 2 json objects
function jsoncat(o1, o2) {
  for (var key in o2) o1[key] = o2[key];
  return o1;
}

//Get bk_data from browser 
function getBookmarks() {
  chrome.bookmarks.getTree(function (itemTree) {
    var fldh = itemTree.title;
    var urlh = {};
    itemTree.forEach((item) => {
      if (item.children)
        processFolder(item);
      else if (item.url) urlh[item.title] = [item.url, item.id];
    });
    if (Object.keys(urlh).length > 0)
      bk_data[fldh] = [urlh, itemTree.id];
    //Move the bar folder on top 
    var lastK = Object.keys(bk_data)[Object.keys(bk_data).length - 1];
    var lastEl = {};
    lastEl[lastK] = bk_data[lastK];
    bk_data = jsoncat(lastEl, bk_data);
    //Save on local storage 
    localStore('bk_data', bk_data);
    localStore('bk_time', new Date());
    matchLinks();
    console.log("getBookmarks - > Completed");
  });
}

//Recursive function for folders
function processFolder(item) {
  let fldk = item.title;
  let urls = {};
  item.children.forEach((child) => {
    if (child.children)
      processFolder(child);
    else
    if (child.url)
      urls[child.title] = [child.url, child.id];
  });
  if (Object.keys(urls).length > 0)
    bk_data[fldk] = [urls, item.id];
}

function matchLinks(regex = prevregexp) {
  totallinks = 0;
  pivotmatch = regex == prevregexp ? pivotmatch : 0;
  prevregexp = regex;
  var pivotbuffer = pivotmatch;
  var p = document.getElementById("links");
  while (p.firstChild) {
    p.removeChild(p.firstChild);
  }
  if (regex.charAt(1) == " " && sb_data.hasOwnProperty(regex.charAt(0))) {
    document.getElementById("action").action = sb_data[regex.charAt(0)];
    document.getElementById("action").children[0].name = "q";
  } else {
    var match = new RegExp(regex ? regex : ".", "i");
    var gmatches = false;
    var fldKeys = Object.keys(bk_data);
    for (var i = 0; i < fldKeys.length; i++) {
      var matches = 0,
        selected, slink = false;
      var fldName = fldKeys[i];
      var title = document.createElement("div");
      title.className = "title";
      title.textContent = fldName;
      var section = document.createElement("div");
      section.id = bk_data[fldName][1];
      section.appendChild(title);
      section.className = "section";
      var inner = document.createElement("div");
      var urlKeys = Object.keys(bk_data[fldName][0]);
      for (var l = 0; l < urlKeys.length; l++) {
        var ln = urlKeys[l];
        if (match.test(ln)) {
          var link = document.createElement("a");
          link.id = bk_data[fldName][0][ln][1];
          link.href = bk_data[fldName][0][ln][0];
          link.textContent = ln;
          if (!pivotbuffer++ && regex != "") {
            selected = true;
            link.className = "selected";
            document.getElementById("action").action = link.href;
            document.getElementById("action").children[0].removeAttribute("name");
            slink = link.getAttribute("id");
          }
          inner.appendChild(link);
          matches += 1;
          gmatches = true;
          totallinks++;
        }
      }
      section.appendChild(inner);
      if (matches > 0) p.appendChild(section);
      if (slink != "") document.getElementById(slink).scrollIntoView({
        block: 'center'
      });
      //if(selected) section.scrollIntoView({behavior:'smooth'});
    }
    if (!gmatches || regex == "") {
      document.getElementById("action").action = sb_data[sb_data["default"]];
      document.getElementById("action").children[0].name = "q";
    }
  }
  //document.getElementById("main").style.height = document.getElementById("main").children[0].offsetHeight + "px";
}

document.getElementById("sb_input").onkeydown = function (e) {
  switch (e.keyCode) {
    case 38:
      pivotmatch = pivotmatch >= 0 ? 0 : pivotmatch + 1;
      matchLinks();
      break;
    case 40:
      pivotmatch =
        pivotmatch <= -totallinks + 1 ? -totallinks + 1 : pivotmatch - 1;
      matchLinks();
      break;
    default:
      break;
  }
  document.getElementById("action").children[0].focus();
};

document.getElementById("action").children[0].onkeypress = function (e) {
  if (e.key == "ArrowDown" || e.key == "ArrowUp") {
    return false;
  }
};

document.getElementById("get_ll").onclick = () => {
  f_get_ll();
}

document.getElementById("sync-bk").onclick = () => {
  console.log("Sync bk_data...");
  bk_data = {};
  getBookmarks();
  console.log("Sync from your bookmarks done!");
  ntoast.info('Sync from your bookmarks done !');
}
document.getElementById("reset-ntp").onclick = () => {
  var r = confirm("You will not lose your bookmarks , only the settings !\nAre you sure you want to reset the ntp settings? ");
  if (r == true) {
    window.localStorage.clear();
    console.log("Reset of settings done !");
    ntoast.warn("Reset of settings done !");
    setTimeout(() => {
      location.reload();
    }, 1000);
  }
}

function displayClock() {
  var now = new Date();
  var clock =
    (now.getHours() < 10 ? "0" + now.getHours() : now.getHours()) +
    ":" +
    (now.getMinutes() < 10 ? "0" + now.getMinutes() : now.getMinutes()) +
    ":" +
    (now.getSeconds() < 10 ? "0" + now.getSeconds() : now.getSeconds());
  document.getElementById("clock").innerText = clock;
}

//window.onload = matchLinks();
var sb_input = document.getElementById("sb_input");
if (sb_data["placeholder"].length > 1) {
  sb_input.placeholder = sb_data["placeholder"];
}
sb_input.addEventListener("input", () => {
  matchLinks(sb_input.value);
});
document.body.onresize = matchLinks();
document.getElementById("action").onsubmit = function () {
  var svalue = this.children[0].value;
  if (svalue.charAt(1) == " " && sb_data.hasOwnProperty(svalue.charAt(0))) {
    this.children[0].value = svalue.substring(2);
  }
  return true;
};
displayClock();
setInterval(displayClock, 1000);


/* ----------- Config NTP Background ---------- */
const wDevice = (window.innerWidth) ? window.innerWidth : screen.width;
const hDevice = (window.innerHeight) ? (window.innerHeight + 56) : screen.height;
const bg_pld = document.getElementById('bg_pld'),
  crop = document.getElementById('crop'),
  result = document.getElementById('result'),
  imgRes = document.getElementById('imgRes'),
  crpp = document.getElementById('croppie');
var cr, cr_img = '',
  img_w = wDevice / 2,
  img_h = hDevice / 2,
  isCrop = 0;
while (img_w > 300) {
  img_w = img_w / 1.2;
  img_h = img_h / 1.2;
}
document.body.style.setProperty("--bg-cw", img_w + "px");
document.body.style.setProperty("--bg-ch", img_h + "px");

function savebg_cropped() {
  document.body.style.setProperty("--bg-img", "url(" + imgRes.src + ")");
  document.body.style.setProperty("--bg-cl", "#fff");
  cropCancel();
  //f_save_bdy();
}
const wllp_file = document.getElementById("wllp_file");
const grid_layout = document.getElementById("grid_layout");
wllp_file.onchange = () => {
  f_wallp1();
};
document.getElementById("wllp_url").onclick = () => {
  f_wallp2();
};
document.getElementById("wllp_gradient").onclick = () => {
  f_wallp3();
};
document.getElementById("wllp_custom").onclick = () => {
  f_wallp4();
};
document.getElementById("wllp_clearvalue").onclick = () => {
  document.getElementById("wllp_value").value = "";
};
document.getElementById("crop_cancel").onclick = () => {
  cropCancel();
};
document.getElementById("crop_cancel2").onclick = () => {
  cropCancel();
};
document.getElementById("crop_next").onclick = () => {
  cropResult();
};
document.getElementById("crop_save").onclick = () => {
  savebg_cropped();
};
grid_layout.onchange = () => {
  var lv = grid_layout.value;
  if (lv == "h") {
    document.body.style.setProperty("--grid-wrap", 'none');
    document.body.style.setProperty("--grid-width", '33.33%');
  } else if (lv == 'v2') {
    document.body.style.setProperty("--grid-wrap", 'wrap');
    document.body.style.setProperty("--grid-width", '50%');
  } else {
    document.body.style.setProperty("--grid-wrap", 'wrap');
    document.body.style.setProperty("--grid-width", '33.33%');
  }
}

/* ------------ Config Color Picker ----------- */
const cp_stt = document.querySelectorAll(".stt_clfrt");
const cp_lrt = document.getElementById("cl_vn");
var cp_current_el;
var picker = new Picker({
  parent: document.querySelector('#cp_v'),
  popup: false,
  cancelButton: true,
  onDone: function (color) {
    if (cp_current_el != null)
      document.body.style.setProperty("--c" + cp_current_el, color.hex);
    cp_lrt.classList.toggle("show-lrt");
  }
});

cp_stt.forEach(element => {
  element.onclick = () => {
    f_cp_rgb((element.id).replace(/\D/g, ""))
  };
});
document.getElementById("close_clvn").onclick = () => {
  f_close_cl()
};

function f_cp_rgb(t) {
  cp_current_el = t;
  let color = getComputedStyle(document.body).getPropertyValue("--c" + t);
  picker.setColor(color, true);
  cp_lrt.classList.toggle("show-lrt");
}

function f_close_cl() {
  cp_lrt.classList.toggle("show-lrt");
}
document.getElementById('backup_btn').onclick = function () {
  var dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(localStorage));
  var date = new Date();
  var exportFileDefaultName = 'b2ntp_' + date.getUTCFullYear() + '' + (date.getUTCMonth() + 1) + '' + date.getUTCDate() + '_' +
    date.getHours() + '_' + date.getMinutes() + '.json';
  var linkElement = document.createElement('a');
  linkElement.setAttribute('href', dataUri);
  linkElement.setAttribute('download', exportFileDefaultName);
  linkElement.click();
}
//Function to import backup file
document.getElementById('restore_btn').onchange = function () {
  var file = this.files[0];
  var reader = new FileReader();
  reader.onload = function (progressEvent) {
    localStorage.clear();
    var data = JSON.parse(this.result);
    Object.keys(data).forEach(function (k) {
      localStorage.setItem(k, data[k]);
    });
    localStorage.ntp_ver = ntp_ver;
  };
  reader.readAsText(file);

  location.reload();
};

/* ------------ CONTEXT MENU CONFIG ----------- */

/*
  const menu = document.querySelector(".context");
  const menuOption = document.querySelector(".context_item");
  let menuVisible = false;
  
  const toggleMenu = command => {
    menu.style.display = command === "show" ? "block" : "none";
    menuVisible = !menuVisible;
  };
  
  const setPosition = ({ top, left }) => {
    menu.style.left = `${left}px`;
    menu.style.top = `${top}px`;
    toggleMenu("show");
  };
  
   
  window.addEventListener("click", e => {
    if (menuVisible) toggleMenu("hide");
  });
  
  menuOption.addEventListener("click", e => {
    console.log("mouse-option", e.target.innerHTML);
  });
  
  window.addEventListener("contextmenu", e => {
    e.preventDefault();
    const origin = {
      left: e.pageX,
      top: e.pageY
    };
    setPosition(origin);
    return false;
  });
*/


function f_wallp1() {
  var file = wllp_file.files[0];
  if (file && file.type.match('image.*')) {
    var reader = new FileReader();
    reader.onload = function (e) {
      bg_pld.style.display = "none";
      if (cr_img == '') {
        cr_img = e.target.result;
        cropInit();
      } else {
        cr_img = e.target.result;
        bindCropImg();
      }
      crop.style.display = "inline";
    }
    reader.readAsDataURL(file);
  }
}

function f_wallp2() {
  var url = prompt("Enter url of the wallpaper . \n", "url");
  var image = new Image();
  image.crossOrigin = "Anonymous";
  image.onload = function (e) {
    bg_pld.style.display = "none";
    if (cr_img == '') {
      cr_img = image.src;
      cropInit();
    } else {
      cr_img = image.src;
      bindCropImg();
    }
    crop.style.display = "inline";
  };
  image.src = (url);
}

function f_wallp3() {
  var rg = random_gradient()
  document.body.style.setProperty("--bg-img", rg);
  document.getElementById("wllp_value").value = rg;
}

function f_wallp4() {
  var v = document.getElementById("wllp_value").value;
  document.body.style.setProperty("--bg-img", v);
  document.body.style.setProperty("--bg-cl", v);
}

/* -------------- Config Croppie -------------- */
function cropInit() {
  cr = new Croppie(crpp, {
    viewport: {
      width: img_w,
      height: img_h
    },
    boundary: {
      width: img_w,
      height: img_h
    },
    mouseWheelZoom: false,
    enableOrientation: true
  });
  bindCropImg();
}

function bindCropImg() {
  cr.bind({
    url: cr_img
  })
}

function cropCancel() {
  if (bg_pld.style.display == "none") {
    bg_pld.style.display = "inline";
    crop.style.display = "none";
    result.style.display = "none";
    wllp_file.value = "";
    isCrop = 0;
  }
}

function cropResult() {
  if (!isCrop) {
    isCrop = 1;
    cr.result({
      type: 'base64', // canvas(base64)|html
      size: '{width:wDevice, height:hDevice}',
      format: 'jpeg', //'jpeg'|'png'|'webp'
      quality: 1 //0~1
    }).then(function (resp) {
      crop.style.display = "none";
      imgRes.src = resp;
      document.getElementById("wllp_value").value = resp;
      result.style.display = "inline";
    });
  }
}

window.addEventListener("DOMContentLoaded", function () {
  aos();
  modal();
  theme();
  gotop();
  pagesRoute();
  sidebar();
});